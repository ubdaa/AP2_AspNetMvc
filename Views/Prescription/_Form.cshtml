@model PrescriptionViewModel

<input asp-for="PrescriptionId" type="hidden"/>

<div class="form-group mb-3">
    <label asp-for="StartDate"></label>
    <input asp-for="StartDate" class="form-control" value="@Model.StartDate?.ToString("yyyy")-@Model.StartDate?.ToString("MM")-@Model.StartDate?.ToString("dd")"/>
    <span asp-validation-for="StartDate" class="text-danger"></span>
</div>

<div class="form-group mb-3">
    <label asp-for="EndDate"></label>
    <input asp-for="EndDate" class="form-control" value="@Model.EndDate?.ToString("yyyy")-@Model.EndDate?.ToString("MM")-@Model.EndDate?.ToString("dd")"/>
    <span asp-validation-for="EndDate" class="text-danger"></span>
</div>

<div class="form-group mb-3">
    <label asp-for="Dosage"></label>
    <input asp-for="Dosage" class="form-control"/>
    <span asp-validation-for="Dosage" class="text-danger"></span>
</div>

<div class="form-group mb-3">
    <label asp-for="AdditionalInformation"></label>
    <input asp-for="AdditionalInformation" class="form-control"/>
    <span asp-validation-for="AdditionalInformation" class="text-danger"></span>
</div>



<h3 class="mt-2 font-bold">Médicaments</h3>

<button type="button" class="btn btn-secondary mx-auto" data-toggle="modal" data-target="#ajoutModal">
    Ajouter un médicament
</button>

<!-- Modal d'ajout des médicaments -->
<div class="modal fade" id="ajoutModal" tabindex="-1" aria-labelledby="ajoutModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Choisir un des médicaments compatibles suivants ?</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <table class="table table-striped table-hover table-sm">
                    <thead class="text-center">
                        <tr>
                            <th scope="col">Nom</th>
                            <th scope="col">Quantité</th>
                            <th scope="col">Ingrédients</th>
                            <th scope="col">Type</th>
                            <th scope="col">Catégorie</th>
                            <th scope="col">Ajouter</th>
                        </tr>
                    </thead>
                    <tbody class="text-center">
                        @foreach (var medicament in Model.Medicaments)
                        {
                            <tr>
                                <td>@medicament.Name</td>
                                <td>@medicament.Quantity</td>
                                <td>@medicament.Ingredients</td>
                                <td>@medicament.Type</td>
                                <td>@medicament.Category</td>
                                <td>
                                    <a type="button" class="text-primary" asp-action="AddMedicament" asp-route-id="@Model.PrescriptionId" 
                                       asp-route-medicamentId="@medicament.MedicamentId">
                                        <i class="bi bi-plus-square"></i>
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
            </div>
        </div>
    </div>
</div>
